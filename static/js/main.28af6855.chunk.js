(this["webpackJsonpreact-connectfour"]=this["webpackJsonpreact-connectfour"]||[]).push([[0],{13:function(e,r,n){},14:function(e,r,n){},16:function(e,r,n){},18:function(e,r,n){"use strict";n.r(r);var t=n(1),c=n.n(t),a=n(8),o=n.n(a),u=(n(13),n(14),n(2)),i=n.n(u),l=n(4),s=n(3),f=(n(16),n(7));function v(e,r){return e>r?e:r}function j(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(0!==x(r))return 0;var t,c,a=O(r),o=-1/0,u=Math.round(Math.log(1e6)/Math.log(a.length));1===a.length&&e(a[0].col);var i,l=Object(f.a)(a);try{for(l.s();!(i=l.n()).done;){var s=i.value;m(r,s,-1),c=-d(r,u,-1/0,1/0,1),console.log("move: "+s.col+"value: "+c),c>o&&(t=s,o=c),p(r,s,-1)}}catch(v){l.e(v)}finally{l.f()}e(t.col)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,r,n,t,c){if(0===r||x(e))return function(e,r,n){var t=x(e);return-1===t||1===t?1e3*n*r*t:2===t?0:function(e,r){function n(e,n,t,c){return r===e&&e===n&&n===t&&null===c||r===e&&e===n&&null===t&&n===c||r===e&&null===n&&e===t&&t===c||null===e&&e===n&&n===t&&c===r}for(var t=0,c=0;c<4;c++)for(var a=0;a<e.length;a++)n(e[c][a],e[c+1][a],e[c+2][a],e[c+3][a])&&t++;for(var o=0;o<e[0].length;o++)for(var u=0;u<3;u++)n(e[o][u],e[o][u+1],e[o][u+2],e[o][u+3])&&t++;for(var i=0;i<4;i++)for(var l=0;l<3;l++)n(e[i][l],e[i+1][l+1],e[i+2][l+2],e[i+3][l+3])&&t++;for(var s=3;s<6;s++)for(var f=0;f<3;f++)n(e[s][f],e[s-1][f+1],e[s-2][f+2],e[s-3][f+3])&&t++;return t}(e,r)}(e,c,r);var a,o=O(e),u=-1/0,i=Object(f.a)(o);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(m(e,l,c),u=v(u,-d(e,r-1,-t,-n,-c)),n=v(n,u),p(e,l,c),n>=t)break}}catch(s){i.e(s)}finally{i.f()}return u}var h=[3,4,5,7,5,4,3,4,6,8,10,8,6,4,5,8,11,13,11,8,5,5,8,11,13,11,8,5,4,6,8,10,8,6,4,3,4,5,7,5,4,3];function O(e){for(var r=[],n=0;n<7;n++)for(var t=5;t>=0;t--)if(!e[n][t]){r.push({col:n,row:t});break}return r.sort((function(e,r){return h[7*r.row+r.col]-h[7*e.row+e.col]}))}function m(e,r,n){e[r.col][r.row]&&console.error("Invalid move: "+r.col+" "+r.row),e[r.col][r.row]=n}function p(e,r,n){e[r.col][r.row]!==n&&console.error("Invalid revert: "+r.col+" "+r.row),e[r.col][r.row]=null}function x(e){function r(e,r,n,t){return e&&e===r&&r===n&&n===t?e:null}for(var n=0;n<6;n++)for(var t=0;t<4;t++){var c=r(e[t][n],e[t+1][n],e[t+2][n],e[t+3][n]);if(c)return c}for(var a=0;a<7;a++)for(var o=0;o<3;o++){var u=r(e[a][o],e[a][o+1],e[a][o+2],e[a][o+3]);if(u)return u}for(var i=0;i<4;i++)for(var l=0;l<3;l++){var s=r(e[i][l],e[i+1][l+1],e[i+2][l+2],e[i+3][l+3]);if(s)return s}for(var f=3;f<7;f++)for(var v=0;v<3;v++){var j=r(e[f][v],e[f-1][v+1],e[f-2][v+2],e[f-3][v+3]);if(j)return j}for(var b=0;b<7;b++)if(!e[b][0])return 0;return 2}var g=n(0);function w(e){var r;return 1===e.value?r="p1":-1===e.value&&(r="p2"),Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"cell",children:Object(g.jsx)("div",{className:r})})})}function k(e){return Object(g.jsx)("div",{className:"board",children:e.grid.map((function(r,n){return Object(g.jsxs)("div",{className:"column-box",children:[Object(g.jsx)("div",{id:"col-".concat(n),className:"col",children:r.map((function(e,r){return Object(g.jsx)(w,{value:e},r)}))},n),Object(g.jsx)("div",{className:"col-border",onClick:function(){return e.onClick(n)},children:r.map((function(e,r){return Object(g.jsx)("div",{className:"cell-border"},r)}))},n+"rand")]},"col"+n)}))})}function N(e){var r="",n=e.state;return 1===n&&(r="you have won! this must be a bug..."),-1===n&&(r="the computer has won."),2===n&&(r="the game is a draw."),0===n&&(r=e.pnext?"your turn. click a column.":"the computer is thinking."),Object(g.jsx)("p",{children:r})}function y(e){var r=e.active,n=e.state,t=e.pNext,c=e.click,a=null;return r&&0===n&&!t&&(a=Object(g.jsx)("div",{className:"load"})),Object(g.jsxs)("div",{className:"menu",children:[Object(g.jsx)("button",{className:"game-button",onClick:c,children:r?"reset":"start game"}),a,Object(g.jsx)(N,{state:n,pnext:t})]})}function C(e){var r=Object(t.useState)(S()),n=Object(s.a)(r,2),c=n[0],a=n[1],o=Object(t.useState)(!0),u=Object(s.a)(o,2),f=u[0],v=u[1],b=Object(t.useState)(0),d=Object(s.a)(b,2),h=d[0],O=d[1],m=Object(t.useState)(!1),p=Object(s.a)(m,2),w=p[0],N=p[1];function C(e,r,n){if(r[e][0]||x(r))return console.log("col full"),null;for(var t=[],c=0;c<r.length;c++)t[c]=r[c].slice();for(var o=6,u=0;u<6;u++)if(t[e][u]){o=u;break}return t[e][o-1]=n?1:-1,O(x(t)),a(t),t}function F(){return(F=Object(l.a)(i.a.mark((function e(r){var n,t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w||0!==h||!f){e.next=11;break}if(v(!1),n=C(r,c,!0)){e.next=6;break}return v(!0),e.abrupt("return");case 6:for(t=[],a=0;a<n.length;a++)t[a]=n[a].slice();return e.next=10,new Promise((function(e){return setTimeout(e,550)}));case 10:j(t).then((function(e){C(e,t,!1),v(!0)}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(g.jsxs)("div",{className:"connect-four",children:[Object(g.jsxs)("div",{className:"header",children:[Object(g.jsx)("h1",{children:"CONNECT FOUR AI"}),Object(g.jsx)("h2",{children:"made by jannis becketepe and timon kobusch."})]}),Object(g.jsx)(y,{active:w,state:h,pNext:f,click:function(){w?(a(S()),O(0),N(!1)):(N(!0),Math.random()<.5||(v(!1),C(3,S(),!1)),v(!0))}}),Object(g.jsx)(k,{grid:c,onClick:function(e){return function(e){return F.apply(this,arguments)}(e)}}),Object(g.jsx)("div",{className:"log-switch",children:Object(g.jsxs)("label",{className:"switch",children:[Object(g.jsx)("input",{type:"checkbox"}),Object(g.jsx)("span",{className:"slider round"})]})})]})}function S(){for(var e=new Array(7),r=0;r<e.length;r++)e[r]=new Array(6).fill(null);return e}var F=function(){return Object(g.jsx)(C,{})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(r){var n=r.getCLS,t=r.getFID,c=r.getFCP,a=r.getLCP,o=r.getTTFB;n(e),t(e),c(e),a(e),o(e)}))};o.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root")),I()}},[[18,1,2]]]);
//# sourceMappingURL=main.28af6855.chunk.js.map