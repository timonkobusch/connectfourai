(this["webpackJsonpreact-connectfour"]=this["webpackJsonpreact-connectfour"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r,c,a=n(1),o=n.n(a),s=n(8),i=n.n(s),u=(n(13),n(14),n(3)),l=n.n(u),f=n(4),v=n(2),j=(n(16),n(7));function b(e,t){return e>t?e:t}function d(e){return h.apply(this,arguments)}function h(){return(h=Object(f.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(0!==w(t))return console.log("finished grid."),null;r=0,c=0;var a,o=p(t),s=-1/0,i=Math.round(Math.log(2e6)/Math.log(o.length));if(1===o.length)e([o[0].col," | no moves need to be analysed"]);else{var u,l=o[0],f=Object(j.a)(o);try{for(f.s();!(u=f.n()).done;){var v=u.value;x(t,v,-1),a=-O(t,i,-1/0,1/0,1),console.log("move: "+v.col+"value: "+a),a>s&&(l=v,s=a),g(t,v,-1)}}catch(h){f.e(h)}finally{f.f()}var b=" | searchdepth: "+i+" | analysed moves: "+r+" | 'skipped' moves: "+c,d=(i-Math.abs(s/1e3))/2;s>=1e3?b+=" | win in "+d+(1===d?" move":" moves"):s<=-1e3&&(b+=" | loss in "+d+(1===d?" move":" moves")),e([l.col,b])}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n,a,o){if(0===t||w(e))return function(e,t,n){r+=1;var c=w(e);if(w(e)===t)return 1e3*n;if(w(e)===-t)return-1e3*n;if(2===c)return 0;return function(e,t){function n(e,n,r,c){return t===e&&e===n&&n===r&&null===c||t===e&&e===n&&null===r&&n===c||t===e&&null===n&&e===r&&r===c||null===e&&e===n&&n===r&&c===t}for(var r=0,c=0;c<4;c++)for(var a=0;a<e.length;a++)n(e[c][a],e[c+1][a],e[c+2][a],e[c+3][a])&&r++;for(var o=0;o<e[0].length;o++)for(var s=0;s<3;s++)n(e[o][s],e[o][s+1],e[o][s+2],e[o][s+3])&&r++;for(var i=0;i<4;i++)for(var u=0;u<3;u++)n(e[i][u],e[i+1][u+1],e[i+2][u+2],e[i+3][u+3])&&r++;for(var l=3;l<6;l++)for(var f=0;f<3;f++)n(e[l][f],e[l-1][f+1],e[l-2][f+2],e[l-3][f+3])&&r++;return r}(e,t)}(e,o,t);var s,i=p(e),u=-1/0,l=Object(j.a)(i);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(x(e,f,o),u=b(u,-O(e,t-1,-a,-n,-o)),n=b(n,u),g(e,f,o),n>=a){c+=(7-i.length)*Math.pow(7,t-1>=0?t-1:0);break}}}catch(v){l.e(v)}finally{l.f()}return u}var m=[3,4,5,7,5,4,3,4,6,8,10,8,6,4,5,8,11,13,11,8,5,5,8,11,13,11,8,5,4,6,8,10,8,6,4,3,4,5,7,5,4,3];function p(e){for(var t=[],n=0;n<7;n++)for(var r=5;r>=0;r--)if(!e[n][r]){t.push({col:n,row:r});break}return t.sort((function(e,t){return m[7*t.row+t.col]-m[7*e.row+e.col]}))}function x(e,t,n){e[t.col][t.row]=n}function g(e,t,n){e[t.col][t.row]=null}function w(e){function t(e,t,n,r){return e&&e===t&&t===n&&n===r?e:null}for(var n=0;n<6;n++)for(var r=0;r<4;r++){var c=t(e[r][n],e[r+1][n],e[r+2][n],e[r+3][n]);if(c)return c}for(var a=0;a<7;a++)for(var o=0;o<3;o++){var s=t(e[a][o],e[a][o+1],e[a][o+2],e[a][o+3]);if(s)return s}for(var i=0;i<4;i++)for(var u=0;u<3;u++){var l=t(e[i][u],e[i+1][u+1],e[i+2][u+2],e[i+3][u+3]);if(l)return l}for(var f=3;f<7;f++)for(var v=0;v<3;v++){var j=t(e[f][v],e[f-1][v+1],e[f-2][v+2],e[f-3][v+3]);if(j)return j}for(var b=0;b<7;b++)if(!e[b][0])return 0;return 2}var k=n(0);function N(e){var t;return 1===e.value?t="p1":-1===e.value&&(t="p2"),Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:"cell",children:Object(k.jsx)("div",{className:t})})})}function y(e){return Object(k.jsx)("div",{className:"board",children:e.grid.map((function(t,n){return Object(k.jsxs)("div",{className:"column-box",children:[Object(k.jsx)("div",{id:"col-".concat(n),className:"col",children:t.map((function(e,t){return Object(k.jsx)(N,{value:e},t)}))},n),Object(k.jsx)("div",{className:"col-border",onClick:function(){return e.onClick(n)},children:t.map((function(e,t){return Object(k.jsx)("div",{className:"cell-border"},t)}))},n+"rand")]},"col"+n)}))})}function C(e){var t="",n=e.state;return 1===n&&(t="you have won! this must be a bug..."),-1===n&&(t="the computer has won."),2===n&&(t="the game is a draw."),0===n&&(t=e.pnext?"your turn. click a column.":"the computer is thinking."),Object(k.jsx)("p",{children:t})}function S(e){var t=e.active,n=e.state,r=e.pNext,c=e.click,a=null;return t&&0===n&&!r&&(a=Object(k.jsx)("div",{className:"load"})),Object(k.jsxs)("div",{className:"menu",children:[Object(k.jsx)("button",{className:"game-button",onClick:c,children:t?"reset":"start game"}),a,Object(k.jsx)(C,{state:n,pnext:r})]})}function M(e){return e.show?Object(k.jsx)("div",{className:"log",children:Object(k.jsx)("p",{children:e.log})}):null}function F(e){var t=Object(a.useState)(P()),n=Object(v.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!0),s=Object(v.a)(o,2),i=s[0],u=s[1],j=Object(a.useState)(0),b=Object(v.a)(j,2),h=b[0],O=b[1],m=Object(a.useState)(!1),p=Object(v.a)(m,2),x=p[0],g=p[1],N=Object(a.useState)(!1),C=Object(v.a)(N,2),F=C[0],T=C[1],A=Object(a.useState)(">"),I=Object(v.a)(A,2),B=I[0],E=I[1],J=Object(a.useState)(1),L=Object(v.a)(J,2),z=L[0],D=L[1];function R(e,t,n){if(t[e][0]||w(t))return console.log("col full"),null;for(var r=[],a=0;a<t.length;a++)r[a]=t[a].slice();for(var o=6,s=0;s<6;s++)if(r[e][s]){o=s;break}return r[e][o-1]=n?1:-1,O(w(r)),c(r),r}function U(){return(U=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x||0!==h||!i){e.next=9;break}if(u(!1),n=R(t,r,!0)){e.next=6;break}return u(!0),e.abrupt("return");case 6:return e.next=8,new Promise((function(e){return setTimeout(e,550)}));case 8:d(n).then((function(e){R(e[0],n,!1),E("> move: "+z+e[1]),D(z+1),u(!0)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(k.jsxs)("div",{className:"connect-four",children:[Object(k.jsxs)("div",{className:"header",children:[Object(k.jsx)("h1",{children:"CONNECT FOUR AI"}),Object(k.jsx)("h2",{children:"made by jannis becketepe and timon kobusch."})]}),Object(k.jsx)(S,{active:x,state:h,pNext:i,click:function(){x?(c(P()),O(0),g(!1),D(0),E("")):(g(!0),Math.random()<.5||(u(!1),R(3,P(),!1),E("> move: 1 | no moves to analyze"),D(2)),u(!0))}}),Object(k.jsx)(y,{grid:r,onClick:function(e){return function(e){return U.apply(this,arguments)}(e)}}),Object(k.jsxs)("div",{className:"log-switch",children:[Object(k.jsxs)("label",{className:"switch",children:[Object(k.jsx)("input",{type:"checkbox",onClick:function(){return F?console.log("log deactivated"):console.log("log activated"),void T(!F)}}),Object(k.jsx)("span",{className:"slider round"})]}),Object(k.jsx)("p",{children:"show stats"})]}),Object(k.jsx)(M,{show:F,log:B})]})}function P(){for(var e=new Array(7),t=0;t<e.length;t++)e[t]=new Array(6).fill(null);return e}var T=function(){return Object(k.jsx)(F,{})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};i.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(T,{})}),document.getElementById("root")),A()}},[[18,1,2]]]);
//# sourceMappingURL=main.38cbcc26.chunk.js.map